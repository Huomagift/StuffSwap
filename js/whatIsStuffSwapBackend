// script.js
import { createClient } from '@supabase/supabase-js';

// 🔐 Initialize Supabase
const supabaseUrl = 'https://your-project.supabase.co';
const supabaseKey = 'your-anon-or-service-role-key';
const supabase = createClient(supabaseUrl, supabaseKey);

// 🌍 Load items based on ZIP code
async function loadItems() {
  const zipCode = document.getElementById('zipInput').value;
  if (!zipCode) return alert('Please enter a ZIP code.');

  const { data, error } = await supabase
    .from('swap_items')
    .select('*')
    .eq('zip_code', zipCode);

  if (error) {
    console.error('Error fetching items:', error);
    return;
  }

  const itemsList = document.getElementById('itemsList');
  itemsList.innerHTML = '';

  if (data.length === 0) {
    itemsList.textContent = 'No items found in your area.';
    return;
  }

  data.forEach(item => {
    const div = document.createElement('div');
    div.className = 'item';
    div.innerHTML = `<strong>${item.item_name}</strong>: ${item.description || 'No description'}`;
    itemsList.appendChild(div);
  });
}
